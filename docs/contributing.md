# Contributing Guide

We welcome contributions to the AI Assistant! This guide provides the information you need to get started, from governing personas to understanding the core data contracts.

## Persona Governance

This project enforces a strict structural standard for all persona files to ensure quality and consistency. All contributions that add or modify personas must pass our validation script.

### The Standard

The rules for persona frontmatter and body sections are defined in `persona_config.yml` at the project root. This file is the single source of truth for persona structure.

The persona directory structure is also a key part of governance. Please see the **[Persona System Guide](./personas.md#the-persona-directory-structure)** for a detailed explanation of the `_mixins`, `_base`, `core`, and `domains` directories.

### How to Validate Your Changes

Before submitting a pull request with persona changes, run the validation script from the project root:

```bash
python scripts/generate_manifest.py
```

This script serves two purposes:
1.  **Validation:** It acts as a linter, failing immediately if any persona file is malformed or does not match its canonical alias.
2.  **Generation:** If all personas are valid, it generates the `persona_manifest.yml` file.

You must commit the updated `persona_manifest.yml` along with your persona changes. Pull requests with stale or missing manifests will be blocked by CI checks.

---

## Understanding System Contracts

To contribute effectively, it's important to understand the core data structures, or "contracts," that the system uses to operate. These contracts are formally defined in a single, machine-readable file.

-   **Canonical Source:** **[`system_contracts.yml`](./system_contracts.html)**

This file is the definitive source of truth for the schemas of all major internal data objects, including:
-   The structure of a **Persona File**.
-   The format of the **Session History**.
-   The schema for an **Execution Plan** generated by the AI.
-   The structure of the **Output Package Manifest** used by the `ai-execute` script.

Before modifying any component that produces or consumes one of these data structures, please consult `system_contracts.yml` to ensure your changes are compatible with the established contract.
